
---

## [`2157 λ² : μ—¬ν–‰`](https://www.acmicpc.net/problem/2157)

- μ•κ³ λ¦¬μ¦ λ¶„λ¥ : `DP`, `κ·Έλν”„ μ΄λ΅ `

---

## π”– λ¬Έμ  μ„¤λ…

- μ΄ `N` κ°μ λ„μ‹κ°€ μ£Όμ–΄μ§€κ³  κ° λ„μ‹μ— λ²νΈκ°€ λ§¤κ²¨μ Έ μλ‹¤. μ—¬ν–‰κ°μ€ `1` λ² λ„μ‹μ—μ„ μ¶λ°ν•΄ `N` λ² λ„μ‹λ΅ λ„μ°©ν•λ ¤ ν•λ‹¤. 
- μ—¬ν–‰κ°μ€ ν„μ¬ λ°©λ¬Έν• λ„μ‹λ³΄λ‹¤ λ‚®μ€ λ²νΈμ λ„μ‹μ— λ°©λ¬Έν•μ§€ μ•λ”λ‹¤. λν• κ° λ„μ‹λ§λ‹¤ μ—°κ²°λ κ²½λ΅κ°€ μ΅΄μ¬ν•λ©° κ²½λ΅μ λΉ„μ©λ§νΌ μ—¬ν–‰κ°μ€ μ΄λ“μ„ μ–»λ”λ‹¤.
- μ΄ λ• μ—¬ν–‰κ°μ΄ λ°©λ¬Έν• λ„μ‹κ°€ `M` κ°λ¥Ό μ΄κ³Όν•μ§€ μ•μΌλ©° μ–»μ„ μ μλ” μµλ€ μ΄λ“μ„ λ‚νƒ€λ‚΄μ–΄λΌ.

---

## π›‘ λ¬Έμ  μ ν• μ΅°κ±΄

- μ‹κ°„ μ ν• : $\text{2 s}$
- λ„μ‹μ κ°μ `N` : $1 \leq \text{N} \leq 300$
- μµλ€ λ°©λ¬Έν•  μ μλ” λ„μ‹μ κ°μ `M` : $2 \leq \text{M} \leq \text{N}$
- λ„μ‹κ°„ μ—°κ²°λ κ²½λ΅μ κ°μ `K` : $1 \leq \text{K} \leq 100,000$

---

## π³ μ¤μ¤λ΅ μƒκ°ν• μ ‘κ·Ό λ°©μ‹

λ¬Έμ λ¥Ό μ ‘ν–μ„ λ•, `DP` λ¬Έμ μ„μ„ μ§κ°ν•μ€λ‹¤. ν•μ§€λ§ μ–΄λ–»κ² ν•΄κ²°ν• μ§€ κ°μ΄ μ΅νμ§€ μ•μ•„, κ·Έλƒ¥ ν•λ² μ™„μ „νƒμƒ‰μΌλ΅ λ§λ“¤μ–΄λ³΄μ•λ‹¤.

```java
private static void compSearch(int city, int cost, int depth)   {
    if (depth > M)      return;
    if (city == N - 1)  {
        maxima = maxima < cost ? cost : maxima;
        return;
    }

    for (int i = city + 1; i < N; i++)  {
        int newCost = costTable[city][i];

        if (newCost == 0)               continue;

        compSearch(i, cost + newCost, depth + 1);
    }
}
```

---

## β— ν‹€λ¦° μ΄μ  μ„¤λ…

μ μ¶ν•΄ ν™•μΈν•λ‹ μ™„μ „νƒμƒ‰ λ°©λ²•μ€ `μ‹κ°„μ΄κ³Ό` λμ—λ‹¤.

μ„μ²λΌ κµ¬ν„ν• μ™„μ „νƒμƒ‰ λ°©λ²•μ€ κΉμ΄κ°€ `M` μ΄λ©° μμ‹μ΄ `N` κ° μƒμ„±λλ” `Tree` κµ¬μ΅°μ™€ μ μ‚¬ν•λ‹¤.
λ•λ¬Έμ— μ‹κ°„λ³µμ΅λ„λ” $O(N^{M})$ μ΄λ©° λ‹Ήμ—°ν `μ‹κ°„μ΄κ³Ό` λλ‹¤.

λ¬Έμ λ¥Ό ν•΄κ²°ν•κ³ μ ν•΄λ‹µμ„ κ²€μƒ‰ν•μ€κ³ , λ‹¤μ [`[1]`](#1--λ°±μ¤€-2157λ²-μ—¬ν–‰---qwerty1434s-velog), [`[2]`](#2--λ°±μ¤€-2157λ²-μ—¬ν–‰---mmaprogramers-velog) λ¥Ό μ°Έκ³ ν•μ€λ‹¤.


---

## β… μ¬λ°”λ¥Έ μ ‘κ·Ό λ°©μ‹ λ° ν•΄κ²° λ°©μ‹

- ν’€μ΄μ ν•µμ‹¬μ€ `i` κ° λ„μ‹λ¥Ό λ°©λ¬Έν• κ²½μ°μ μλ” `i - 1` κ°λ¥Ό λ°©λ¬Έν• κ²½μ°μ μλ¶€ν„° μ΄μ–΄μ§„λ‹¤λ” κ²ƒμ΄λ‹¤.

μ°μ„  μ—¬ν–‰κ°μ€ λ°λ“μ‹ `1` λ² λ„μ‹λ¶€ν„° μ¶λ°ν•΄, `N` λ² λ„μ‹μ— λ„μ°©ν•λ‹¤. ν•μ§€λ§ μ—¬ν–‰ν•λ©° λ°©λ¬Έν• λ„μ‹κ°€ `M` κ°λ΅ μ ν•λλ―€λ΅, `"1 λ²λ¶€ν„° μ¶λ°ν•΄ λ„μ°©ν• λ„μ‹"` μ™€ `"λ„μ°©ν•  λ•κΉμ§€ λ°©λ¬Έν• λ„μ‹"` λ¥Ό μ΄μ©ν• `DP` λ¥Ό λ– μ¬λ¦΄ μ μμ–΄μ•Ό ν•λ‹¤.

<!-- P_2157_explain_1.png -->

<p align="center">
    <img src="./P_2157_explain_1.png", width=40%, height=40%>
</p>

2 μ°¨μ› `M x N` λ°°μ—΄μ `(i, j)` μ›μ†λ” `(1 λ² λ„μ‹μ—μ„ μ¶λ°ν•΄) i κ°μ λ„μ‹λ¥Ό λ°©λ¬Έν•μ—¬ j λ² λ„μ‹μ— λ„μ°©ν• κ²½μ°μ μ μ¤‘ μµλ“κ°’` μ„ λ‚νƒ€λ‚Έλ‹¤.

κ·Έλ°λ° λ¬Έμ  μ΅°κ±΄μ—μ„ μ—¬ν–‰κ°μ€ μμ‹ μ΄ μ„μΉν• λ„μ‹λ³΄λ‹¤ λ²νΈκ°€ λ‚®μ€ λ„μ‹λ” μ—¬ν–‰ν•μ§€ μ•λ”λ‹¤ ν•μ€λ‹¤. λν• `1 λ² λ„μ‹μ— μ¶λ°ν•΄ 1 λ² λ„μ‹λ΅ λ„μ°©ν•λ” κ²½μ°` λ” μ—†μΌλ―€λ΅, μ›μ† $\{(i, j) : i, j = 1 \text{ or } j < i \}$ λ” μ •μλμ§€ μ•λ”λ‹¤.

μ¦‰, `2` λ² λ„μ‹μ— λ„μ°©ν•κΈ° μ„ν•΄ `3` κ°μ λ„μ‹μ— λ°©λ¬Έν•λ” κ²½μ°λ” μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤λ” κ²ƒμ΄λ‹¤. `(μ¤μ§ 1 --> 2, 2 κ°μ λ„μ‹μ— λ°©λ¬Έν•λ” κ²½μ°λ§ μ΅΄μ¬)`

λν• `2` κ°μ λ„μ‹μ— λ°©λ¬Έν•λ©° `j` λ„μ‹μ— λ°©λ¬Έν•λ” κ²½μ°λ” μ¤μ§ `(1 --> j)` λ΅ μ΄λ™ν•λ” κ²½μ°μ΄λ‹¤. λ”°λΌμ„ 2 μ°¨μ› λ°°μ—΄μ„ μ•„λμ²λΌ μ±„μΈ μ μλ‹¤.

<!-- P_2157_explain_2.png -->

<p align="center">
    <img src="./P_2157_explain_2.png", width=40%, height=40%>
</p>

μ΄μ²λΌ λ°°μ—΄μ„ μ±„μ› μ„ λ•, λ‡κ°€μ§€ κ²½μ°λ¥Ό μƒκ°ν•΄ λ³Ό μ μλ‹¤. `j` λ„μ‹μ— λ„μ°©ν•λ©° `j` κ°μ λ„μ‹μ— λ°©λ¬Έν• κ²½μ°μ μλ” μ–΄λ–»κ² λ κΉ?

κ·Έλ¬ν• κ²½μ°λ” μ¤μ§ `(1 -> 2 -> ... -> j)` λ΅ μ΄λ™ν•λ” 1 κ°€μ§€μ΄λ‹¤. λ”°λΌμ„ λ°°μ—΄μ `(i, i)` μ›μ†λ“¤μ„ μ•„λμ²λΌ μ±„μ›λ„£μ„ μ μλ‹¤.

<!-- P_2157_explain_3.png -->

<p align="center">
    <img src="./P_2157_explain_3.png", width=40%, height=40%>
</p>

μ΄μ  λ°©λ¬Έν• λ„μ‹κ°€ `3` κ°μΈ κ²½μ°λ¶€ν„° μƒκ°ν•μ. 

μλ¥Ό λ“¤μ–΄ `4` λ² λ„μ‹μ— λ€ν•΄ μƒκ°ν•μ. `4` λ² λ„μ‹μ— `3` λ² λ°©λ¬Έν• κ²½μ°μ μλ” `(1 --> 2 --> 4)` λλ” `(1 --> 3 --> 4)` λΏμ΄λ‹¤. 

κ·Έλ°λ° `(1 --> 2)` κ³Ό `(1 --> 3)` μ΄λ™μ€ μ΄λ―Έ λ°°μ—΄μ— κΈ°λ΅λμ–΄ μμΌλ―€λ΅, `(1 --> 2) + (2 --> 4)`, `(1 --> 3) + (3 --> 4)` λ¥Ό λΉ„κµν•΄ λ‘ κ²½μ° μ¤‘ μ–΄λ–¤κ²ƒμ΄ μµλ“κ°’μΈμ§€ ν™•μΈν•  μ μλ‹¤.

λν• `5` λ² λ„μ‹μ— λ€ν•΄ μƒκ°ν•΄λ³΄λ©΄, `(1 --> 2 --> 5)`, `(1 --> 3 --> 5)`, `(1 --> 4 --> 5)` κ²½μ°κ°€ μ΅΄μ¬ν•λ‹¤.
κ·Έλ°λ° μ΄ λν• `(1 --> 2)`, `(1 --> 3)`, `(1 --> 4)` μ΄λ™μ΄ λ°°μ—΄μ— κΈ°λ΅λμ–΄ μμΌλ―€λ΅, μ•μ„  κ²½μ°μ²λΌ κ° κ²½μ°λ¥Ό κ³„μ‚°, λΉ„κµν•μ—¬ μµλ“κ°’μ„ ν™•μΈν•  μ μλ‹¤.

<ins>**μ¦‰, λ°©λ¬Έν• λ„μ‹κ°€ `i` κ°μΈ κ²½μ°λ” ν•„μ—°μ μΌλ΅ `i - 1` κ° λ°©λ¬Έν• κ²½μ°μ μλ¶€ν„° μ΄μ–΄μ§„λ‹¤λ” κ²ƒμ΄λ‹¤.**</ins>

κ·Έλμ„ μ•„λ λ°©μ‹μ²λΌ λ°°μ—΄μ„ μ±„μΈ μ μλ‹¤.

<!-- P_2157_explain_4.png -->

<p align="center">
    <img src="./P_2157_explain_4.png", width=40%, height=40%>
</p>

κ·Έλ°λ° μ΄ λ°©μ‹μ€ λ°©λ¬Έν• λ„μ‹κ°€ `3` μ΄μƒμΈ κ²½μ°μ— λ¨λ‘ μ μ©ν•  μ μλ‹¤. κ·Έλμ„ μ•„λμ²λΌ λλ‹¤μ‹ λ°°μ—΄μ„ μ±„μΈ μ μλ‹¤.

<!-- P_2157_explain_5.png -->

<p align="center">
    <img src="./P_2157_explain_5.png", width=40%, height=40%>
</p>

κ·Έλ ‡κ² λ°°μ—΄μ„ λ‹¤ μ±„μ°λ©΄ κ²°κµ­ `(i, 7)` μ›μ†λ“¤μ€ `i κ°μ λ„μ‹λ¥Ό λ°©λ¬Έν–μΌλ©°, 7 λ² λ„μ‹μ— λ„μ°©ν• κ²½μ°` λ“¤μ„ λ‚νƒ€λ‚Έλ‹¤. λ¬Έμ λ” μ΄ μ¤‘ μµλ“κ°’μ„ μ”κµ¬ν•μ€μΌλ―€λ΅, ν•΄λ‹Ή μ›μ†λ“¤μ μµλ“κ°’μ΄ μ •λ‹µμ΄ λλ‹¤.

<!-- P_2157_explain_6.png -->

<p align="center">
    <img src="./P_2157_explain_6.png", width=40%, height=40%>
</p>

---

## π›  μμ‹ μ ν’€μ΄μ—μ„ κ°μ„ ν•  λ¶€λ¶„

λ‹¤λ¥Έ λ¬Έμ  μ ν•μ— λΉ„ν•΄ νΉν `DP` κ°€ μ–΄λ µκ² λκ»΄μ§„λ‹¤. μ¤μ¤λ΅ ν’€μ΄ λ°©λ²•μ„ μƒκ°ν•μ§€ λ»ν–μΌλ©°, ν’€μ΄λ²•μ„ μ΄ν•΄ν•λ” κ²ƒ μ΅°μ°¨ μ‹κ°„μ΄ κ±Έλ Έλ‹¤.

`DP` μ ν•μ λ¬Έμ λ¥Ό ν’€κΈ° μ„ν•΄ λ§μ€ λ…Έλ ¥μ΄ ν•„μ”ν•΄ λ³΄μΈλ‹¤.

---

## Reference

- ##### [`[1] : λ°±μ¤€ 2157λ²: μ—¬ν–‰ - qwerty1434's Velog`](https://velog.io/@qwerty1434/%EB%B0%B1%EC%A4%80-2157%EB%B2%88-%EC%97%AC%ED%96%89)
- ##### [`[2] : λ°±μ¤€ 2157λ² μ—¬ν–‰ - MMAprogramer's Velog`](https://velog.io/@engus525/%EB%B0%B1%EC%A4%80-2157%EB%B2%88-%EC%97%AC%ED%96%89)

---


